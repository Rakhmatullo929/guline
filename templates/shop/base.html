{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GULINE - {% trans "–ú–æ–¥–Ω–∞—è –æ–¥–µ–∂–¥–∞" %}{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}?v=1.0">
    <link rel="stylesheet" href="{% static 'css/shop_styles.css' %}?v=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <a href="{% url 'shop:home' %}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 35 550 400" class="logo">
                            <g fill="#2c2c2c" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                <g data-paper-data="{&quot;isGlobalGroup&quot;:true,&quot;bounds&quot;:{&quot;x&quot;:65,&quot;y&quot;:210.17397501467258,&quot;width&quot;:420,&quot;height&quot;:49.65204997065484}}">
                                    <g data-paper-data="{&quot;isPrimaryText&quot;:true}">
                                        <path d="M90.28381,258.84003c-4.27266,0 -7.98189,-0.69255 -11.12769,-2.07764c-3.1458,-1.38509 -5.82208,-3.27492 -8.02884,-5.66949c-1.92504,-2.11285 -3.42752,-4.5309 -4.50742,-7.25413c-1.0799,-2.72323 -1.61985,-5.65775 -1.61985,-8.80355c0,-3.47447 0.68081,-6.71418 2.04242,-9.71912c1.36162,-3.00495 3.23971,-5.6108 5.63428,-7.81756c2.11285,-1.972 4.61306,-3.50968 7.50063,-4.61306c2.88757,-1.10338 6.25639,-1.65507 10.10648,-1.65507h25.70638v12.60669h-25.70638c-2.15981,0 -3.94399,0.28171 -5.35256,0.84514c-1.40857,0.56343 -2.62933,1.31466 -3.66228,2.25371c-1.0799,1.03295 -1.93678,2.25371 -2.57064,3.66228c-0.63386,1.40857 -0.95078,2.91104 -0.95078,4.50742c0,1.45552 0.25824,2.82888 0.77471,4.12006c0.51648,1.29119 1.24424,2.42978 2.18328,3.41578c1.03295,1.12686 2.32414,2.05416 3.87356,2.78192c1.54943,0.72776 3.45099,1.09164 5.7047,1.09164h12.18412c0.61038,0 0.91557,-0.32867 0.91557,-0.986v-12.74755h12.67712v23.0301c0,2.01895 -1.00947,3.02842 -3.02842,3.02842z"></path>
                                        <path d="M161.31089,258.84003c-3.00495,0 -5.56385,-0.29345 -7.6767,-0.88036c-2.11285,-0.5869 -3.83835,-1.50247 -5.17649,-2.74671c-1.33814,-1.24424 -2.3124,-2.81714 -2.92278,-4.71871c-0.61038,-1.90157 -0.91557,-4.19049 -0.91557,-6.86677v-32.39708h12.81798v30.98851c0,2.95799 1.52595,4.43699 4.57785,4.43699h19.79039c3.1458,0 4.71871,-1.479 4.71871,-4.43699v-30.98851h12.81798v32.39708c0,5.30561 -1.29119,9.16744 -3.87356,11.58548c-2.58238,2.41804 -6.85503,3.62706 -12.81798,3.62706z"></path>
                                        <path d="M243.32481,258.84003c-2.91104,0 -5.3643,-0.31693 -7.35977,-0.95078c-1.99547,-0.63386 -3.59185,-1.59638 -4.78913,-2.88757c-1.19728,-1.29119 -2.05416,-2.91104 -2.57064,-4.85956c-0.51648,-1.94852 -0.77471,-4.21397 -0.77471,-6.79634v-32.11537h12.81798v30.91809c0,1.73723 0.29345,2.92278 0.88036,3.55664c0.5869,0.63386 1.70202,0.95078 3.34535,0.95078h33.03094v12.18412z"></path>
                                        <path d="M317.73246,211.2304v47.60963h-12.81798v-47.60963z"></path>
                                        <path d="M405.94408,249.6139c0,1.78419 -0.2465,3.32187 -0.7395,4.61306c-0.493,1.29119 -1.15033,2.34761 -1.972,3.16928c-0.82167,0.82167 -1.77245,1.43204 -2.85235,1.83114c-1.0799,0.39909 -2.20676,0.59864 -3.38057,0.59864c-2.01895,0 -3.7914,-0.29345 -5.31735,-0.88036c-1.52595,-0.5869 -2.85235,-1.53769 -3.97921,-2.85235l-26.12895,-30.2138c-0.37562,-0.42257 -0.75124,-0.63386 -1.12686,-0.63386c-0.32867,0 -0.61038,0.11738 -0.84514,0.35214c-0.23476,0.23476 -0.35214,0.56343 -0.35214,0.986v32.25623h-12.53626v-37.53836c0,-2.01895 0.26998,-3.73271 0.80993,-5.14128c0.53995,-1.40857 1.30293,-2.5589 2.28892,-3.45099c0.986,-0.89209 2.15981,-1.53769 3.52142,-1.93678c1.36162,-0.39909 2.84061,-0.59864 4.43699,-0.59864c2.25371,0 4.15528,0.35214 5.7047,1.05643c1.54943,0.70428 3.07538,1.92504 4.57785,3.66228l23.24139,27.81923c0.18781,0.23476 0.37562,0.38736 0.56343,0.45778c0.18781,0.07043 0.39909,0.10564 0.63386,0.10564c0.65733,0 0.986,-0.42257 0.986,-1.26771v-30.77723h12.46583z"></path>
                                        <path d="M485,211.2304v12.60669h-36.20022c-0.75124,0 -1.12686,0.39909 -1.12686,1.19728v5.42299h37.11579v9.1557h-37.11579v5.77513c0,0.84514 0.37562,1.26771 1.12686,1.26771h36.20022v12.18412h-43.38392c-4.46047,0 -6.6907,-2.20676 -6.6907,-6.62027v-34.58036c0,-4.27266 2.25371,-6.40899 6.76113,-6.40899z"></path>
                                    </g>
                                </g>
                            </g>
                        </svg>    
                </a>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-times"></i>
            </button>
        </div>
        

        <nav class="sidebar-nav">
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{% url 'shop:home' %}" class="sidebar-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                        <i class="fas fa-home"></i>
                        <span>{% trans "–ì–ª–∞–≤–Ω–∞—è" %}</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'shop:catalog' %}" class="sidebar-link {% if request.resolver_match.url_name == 'catalog' %}active{% endif %}">
                        <i class="fas fa-th-large"></i>
                        <span>{% trans "–ö–∞—Ç–∞–ª–æ–≥" %}</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'shop:favorites' %}" class="sidebar-link favorites-link {% if request.resolver_match.url_name == 'favorites' %}active{% endif %}">
                        <i class="fas fa-heart"></i>
                        <span>{% trans "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" %}</span>
                        <span class="favorites-counter" style="display: none;">0</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'shop:about' %}" class="sidebar-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}">
                        <i class="fas fa-info-circle"></i>
                        <span>{% trans "–û –Ω–∞—Å" %}</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'shop:contact' %}" class="sidebar-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">
                        <i class="fas fa-envelope"></i>
                        <span>{% trans "–ö–æ–Ω—Ç–∞–∫—Ç—ã" %}</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Language Switcher -->
        <div class="language-switcher">
            <h4>{% trans "–Ø–∑—ã–∫" %}</h4>
            <div class="language-flags">
                {% get_current_language as LANGUAGE_CODE %}
                <a href="{% url 'set_language' %}?lang=ru&next={{ request.get_full_path|urlencode }}" 
                   class="language-flag {% if LANGUAGE_CODE == 'ru' %}active{% endif %}" 
                   title="–†—É—Å—Å–∫–∏–π">
                    <span class="flag-icon">üá∑üá∫</span>
                </a>
                <a href="{% url 'set_language' %}?lang=en&next={{ request.get_full_path|urlencode }}" 
                   class="language-flag {% if LANGUAGE_CODE == 'en' %}active{% endif %}" 
                   title="English">
                    <span class="flag-icon">üá∫üá∏</span>
                </a>
                <a href="{% url 'set_language' %}?lang=uz&next={{ request.get_full_path|urlencode }}" 
                   class="language-flag {% if LANGUAGE_CODE == 'uz' %}active{% endif %}" 
                   title="O'zbek">
                    <span class="flag-icon">üá∫üáø</span>
                </a>
            </div>
        </div>
        
        <div class="sidebar-footer">
            <div class="sidebar-social">
                <a href="#" class="social-link instagram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/>
                    </svg>
                </a>
                <a href="#" class="social-link telegram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" fill="currentColor"/>
                    </svg>
                </a>
            </div>
            <div class="sidebar-contact">
                <div class="contact-item">
                    <div class="contact-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9844 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.271 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.59531 1.99522 8.06671 2.16708 8.43376 2.48353C8.80081 2.79999 9.03996 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.89391 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5865 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span>+998 91 411 11 44</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- HTMX Modals -->
    <div id="quick-view-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <!-- HTMX will load content here -->
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>GULINE</h4>
                    <p>{% trans "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–¥–∞ –¥–ª—è —Å—Ç–∏–ª—å–Ω—ã—Ö –ª—é–¥–µ–π" %}</p>
                    <div class="sidebar-social">
                        <a href="#" class="social-link instagram">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link telegram">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" fill="currentColor"/>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>{% trans "–ö–∞—Ç–∞–ª–æ–≥" %}</h4>
                    <ul>
                        <li><a href="{% url 'shop:catalog' %}?gender=men">{% trans "–ú—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞" %}</a></li>
                        <li><a href="{% url 'shop:catalog' %}?gender=women">{% trans "–ñ–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞" %}</a></li>
                        <li><a href="{% url 'shop:catalog' %}?gender=kids">{% trans "–î–µ—Ç—Å–∫–∞—è –æ–¥–µ–∂–¥–∞" %}</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>{% trans "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" %}</h4>
                    <ul>
                        <li><a href="{% url 'shop:about' %}">{% trans "–û –Ω–∞—Å" %}</a></li>
                        <li><a href="{% url 'shop:contact' %}">{% trans "–ö–æ–Ω—Ç–∞–∫—Ç—ã" %}</a></li>
                        <li><a href="#">{% trans "–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞" %}</a></li>
                        <li><a href="#">{% trans "–í–æ–∑–≤—Ä–∞—Ç –∏ –æ–±–º–µ–Ω" %}</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>{% trans "–ö–æ–Ω—Ç–∞–∫—Ç—ã" %}</h4>
                    <p><i class="fas fa-phone"></i> +998 91 411 11 44</p>
                    <p><i class="fas fa-envelope"></i> info@guline.ru</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 GULINE. {% trans "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã" %}.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="{% static 'js/script.js' %}?v=1.0"></script>
    <script src="{% static 'js/htmx-enhancements.js' %}?v=1.0"></script>
    
    <!-- Fallback Sidebar Script -->
    <script>
        // Simple fallback sidebar functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Fallback sidebar script loaded');
            
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            console.log('Fallback elements found:', {
                mobileMenuBtn: !!mobileMenuBtn,
                sidebar: !!sidebar,
                sidebarToggle: !!sidebarToggle,
                sidebarOverlay: !!sidebarOverlay
            });
            
            // Open sidebar
            function openSidebar() {
                console.log('Fallback: Opening sidebar');
                if (sidebar) sidebar.classList.add('open');
                if (sidebarOverlay) sidebarOverlay.classList.add('active');
                if (mobileMenuBtn) {
                    mobileMenuBtn.classList.add('hidden');
                }
                document.body.style.overflow = 'hidden';
            }
            
            // Close sidebar
            function closeSidebar() {
                console.log('Fallback: Closing sidebar');
                if (sidebar) sidebar.classList.remove('open');
                if (sidebarOverlay) sidebarOverlay.classList.remove('active');
                if (mobileMenuBtn) {
                    mobileMenuBtn.classList.remove('hidden');
                }
                document.body.style.overflow = '';
            }
            
            // Add event listeners
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Fallback: Mobile menu button clicked');
                    openSidebar();
                });
            }
            
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Fallback: Sidebar toggle clicked');
                    closeSidebar();
                });
            }
            
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Fallback: Overlay clicked');
                    closeSidebar();
                });
            }
            
            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && sidebar && sidebar.classList.contains('open')) {
                    console.log('Fallback: Escape key pressed');
                    closeSidebar();
                }
            });
            
            console.log('Fallback sidebar script initialized');
        });
    </script>
    
    <!-- Favorites System -->
    <script src="{% static 'js/favorites.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>